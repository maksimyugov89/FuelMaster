# <img width="64" height="74" alt="logo" src="https://github.com/user-attachments/assets/1bceca05-16a6-421e-b3ea-2349624b89a9" /> FuelMaster

**FuelMaster** — это комплексное мобильное приложение на базе Flutter, разработанное для эффективного управления расходом топлива и данными автомобилей. Приложение предоставляет интуитивно понятный интерфейс для добавления и отслеживания транспортных средств, записи истории заправок и расчетов, а также визуализации трендов потребления топлива. Оно поддерживает многоязычность (английский и русский), светлую и темную темы, а также предлагает функции синхронизации данных (для премиум-пользователей) и монетизации через рекламу и подписку.

## Возможности

-   **Управление автомобилями**: Добавление, редактирование и удаление автомобилей. Приложение включает обширную базу предустановленных моделей автомобилей, загружаемых из CSV-файла.
-   **Калькулятор расхода топлива**: Детальный расчет потребления топлива с учетом пробега (город/трасса), уровня топлива, заправок и различных условий (зима, кондиционер, горы).
-   **История расчётов**: Хранение и просмотр всех расчетов. История может быть отфильтрована по автомобилю и дате, а также визуализирована с помощью интерактивных графиков (`fl_chart`).
-   **Система пользователей**: Регистрация и вход в систему через Firebase Authentication (email/пароль).
-   **Синхронизация с облаком (Премиум)**: Для премиум-пользователей данные автомобилей и история расчетов синхронизируются с Google Firestore.
-   **Настройки**: Пользователи могут настраивать тему приложения (светлая/темная/авто), язык (en/ru) и другие параметры.
-   **Интеграция с внешними сервисами**:
    *   **Geoapify**: Используется на экране регистрации для поиска городов и автозаполнения.
    *   **WeatherAPI**: Получает данные о погоде для расчета коэффициента расхода топлива.
    *   **OpenRouter (DeepSeek)**: Подключается к ИИ-сервису для генерации советов по топливной эффективности.
-   **UI/UX**: Приложение следует принципам Material 3 Design, имеет настраиваемые темы (`theme.dart`) и переиспользуемые виджеты (`widgets.dart`). Стандартный поток запуска: `SplashScreen` -> `OnboardingPage` -> `RegistrationPage` -> `MainMenuPage`.
-   **Управление состоянием**: Использует пакет `provider` для эффективного управления состоянием приложения.
-   **Локальная база данных**: Использует SQLite (`sqflite`) для локального хранения данных автомобилей и истории расчетов.

## Монетизация

-   **Реклама**: Интеграция Yandex Mobile Ads для показа баннерной, нативной и межстраничной рекламы.
-   **Покупки в приложении**: Премиум-подписка доступна для покупки через пакет `in_app_purchase`.
-   **Firebase Analytics**: Для отслеживания взаимодействий пользователей и эффективности рекламы.

## Критическое предупреждение о безопасности

**ВНИМАНИЕ:** API-ключи для **WeatherAPI** и **OpenRouter (DeepSeek)** в настоящее время жестко закодированы непосредственно в исходных файлах Dart (`weather_service.dart`, `deepseek_service.dart`). Это представляет собой серьезную уязвимость безопасности и должно быть немедленно устранено путем перемещения этих ключей в файл `.env` или аналогичный безопасный механизм. Также рекомендуется переместить `yandex_mobile_ads_app_id` из `AndroidManifest.xml` в `.env` для единообразия и безопасности.

## Скриншоты


![Screenshot_2025-09-04-02-06-47-69_00ed68a25f49ddc81dfbde00b62141e1](https://github.com/user-attachments/assets/4f50cbec-52e2-4df9-82fc-4b6483858d1b)

## Начало работы

### Требования

-   **Flutter SDK**: Версия 3.0.0 или выше (указано в `pubspec.yaml`).
-   **Dart**: Совместим с Flutter SDK (версия >=3.0.0 <4.0.0).
-   **Android Studio** или **VS Code** с плагинами Flutter и Dart.
-   **Аккаунт Firebase**: Для интеграции Firebase Authentication, Firestore и Analytics.
-   **Аккаунт Yandex Mobile Ads**: Для интеграции рекламы.
-   **Keystore**: Для подписи релизной сборки Android.

### Настройка переменных окружения

Для корректной работы приложения необходимо настроить переменные окружения для всех API-ключей и идентификаторов. Эти ключи загружаются из файла `.env` в корне проекта.

1.  **Создайте файл `.env`** в корневой директории проекта.
2.  **Скопируйте содержимое** из файла `.env.example` в ваш новый файл `.env`.
3.  **Замените плейсхолдеры** на ваши реальные API-ключи и идентификаторы, полученные от соответствующих сервисов.

    Пример содержимого файла `.env`:
    ```
    WEATHER_API_KEY=ваш_погодный_api_ключ
    DEEPSEEK_API_KEY=ваш_deepseek_api_ключ
    GEOAPIFY_API_KEY=ваш_geoapify_api_ключ
    YANDEX_MOBILE_ADS_APP_ID=ваш_yandex_mobile_ads_app_id
    ```
    **Важно:** Файл `.env` содержит конфиденциальную информацию и **не должен** быть добавлен в систему контроля версий (Git). Он уже добавлен в `.gitignore`.

### Установка

1.  **Клонирование репозитория**:
    ```bash
    git clone https://github.com/maksimyugov89/FuelMaster.git
    cd FuelMaster
    ```
2.  **Получение зависимостей Flutter**:
    ```bash
    flutter pub get
    ```
3.  **Настройка Firebase**:
    *   Следуйте инструкциям на [Firebase Console](https://console.firebase.google.com/) для добавления вашего Android-приложения.
    *   Загрузите файл `google-services.json` в директорию `android/app/`.
    *   Убедитесь, что в Firebase Console включены Firebase Authentication, Firestore и Play Integrity API.
    *   Добавьте SHA-ключи вашего приложения в настройки проекта Firebase.
4.  **Настройка Yandex Mobile Ads**:
    *   Получите `yandex_mobile_ads_app_id` из вашего аккаунта Yandex Mobile Ads.
    *   **Переместите этот ID в файл `.env`**, как указано выше.
    *   Удалите или закомментируйте соответствующую `meta-data` запись в `android/app/src/main/AndroidManifest.xml` после перемещения ID в `.env`.
5.  **Генерация файлов локализации**:
    ```bash
    flutter gen-l10n
    ```
6.  **Запуск приложения**:
    ```bash
    flutter run
    ```
    Или для запуска на конкретном устройстве (например, `RMX3853`):
    ```bash
    flutter run -d RMX3853 --verbose
    ```

## Тестирование

Для запуска всех тестов:

```bash
flutter test
```

## Вклад

Мы приветствуем вклад в развитие FuelMaster! Пожалуйста, ознакомьтесь с нашими рекомендациями по внесению вклада.

## Лицензия

Этот проект распространяется под лицензией MIT.
